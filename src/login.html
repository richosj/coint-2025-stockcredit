<!-- @pageTitle 로그인 -->
<!-- @pageNote 로그인 페이지 -->
<!-- @pageCreated 2025-01-15 -->
<!-- @pageUpdated 2025-01-15 -->
<!DOCTYPE html>
<html lang="ko">

<head>
	{{> layout/meta}}
</head>

<body>
	{{> layout/header}}
	<main id="main" class="main">
		{{> layout/subVisual}}

		<div class="breadcrumb">
			<div class="container">
				<ol class="breadcrumb-list">
					<li class="breadcrumb-item">
						<a href="/">스탁크레딧 </a>
					</li>
					<li class="breadcrumb-item">
						<span>로그인</span>
					</li>
				</ol>
			</div>
		</div>

		<div id="sub-layout">
			<div class="container">
				<div class="login-container">
					<form id="login-form" class="login-form">
						<div>
							<div class="input-row">
								<label for="login-id" class="label">아이디</label>
								<input type="text" id="login-id" name="login-id" placeholder="아이디(이메일)를 입력하세요.">
								<div class="login-id-save">
									<input type="checkbox" id="login-id-save" name="login-id-save">
									<label for="login-id-save"></label>아이디 저장</label>
								</div>
								<div class="error-message">(아이디는 숫자 6자리를 입력하세요)</div>
							</div>
							<div class="input-row">
								<label for="login-password" class="label">비밀번호</label>
								<input type="password" id="login-password" name="login-password" placeholder="비밀번호를 입력해주세요.">
								<div class="error-message">(숫자 6자리를 입력하세요)</div>
							</div>
							<div class="input-row">
								<button type="submit" class="btn-login">로그인</button>
							</div>
						</div>
					</form>
					<div class="login-links">
						<a href="#" class="login-link">아이디 찾기</a>
						<a href="#" class="login-link">비밀번호 찾기</a>
					</div>
				</div>
			</div>
		</div>

	</main>

	{{> layout/footer}}

	<script type="module" src="/js/main.js"></script>
	<script>
		document.addEventListener('DOMContentLoaded', function() {
			const loginForm = document.getElementById('login-form');
			const loginId = document.getElementById('login-id');
			const loginPassword = document.getElementById('login-password');
			const submitButton = document.querySelector('#login-form .btn-login');

			// 에러 메시지 표시 함수
			function showError(input, message) {
				let errorDiv = input.parentElement.querySelector('.error-message');
				if (errorDiv) {
					errorDiv.textContent = message;
					errorDiv.style.display = 'block';
					errorDiv.style.color = '#df0000';
				}
				input.style.borderColor = '#df0000';
			}

			// 에러 메시지 숨기기
			function hideError(input) {
				const errorDiv = input.parentElement.querySelector('.error-message');
				if (errorDiv) {
					errorDiv.style.display = 'none';
				}
				input.style.borderColor = '';
			}

			// 이메일 유효성 검사
			function validateEmail(email) {
				const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
				return emailRegex.test(email);
			}

			// 실시간 검증
			if (loginId) {
				loginId.addEventListener('blur', function() {
					if (this.value.trim() && !validateEmail(this.value.trim())) {
						showError(this, '(올바른 이메일 형식이 아닙니다)');
					} else if (this.value.trim()) {
						hideError(this);
					}
				});
			}

			if (loginPassword) {
				loginPassword.addEventListener('input', function() {
					if (this.value.length > 0 && this.value.length < 6) {
						showError(this, '(비밀번호를 6자리 이상 입력해 주세요)');
					} else if (this.value.length >= 6) {
						hideError(this);
					}
				});
			}

			// 폼 제출 검증
			if (loginForm) {
				loginForm.addEventListener('submit', function(e) {
					e.preventDefault();

					let isValid = true;

					// 아이디 검증
					if (!loginId || !loginId.value.trim()) {
						if (loginId) showError(loginId, '(아이디(이메일)를 입력해주세요)');
						isValid = false;
					} else if (!validateEmail(loginId.value.trim())) {
						showError(loginId, '(올바른 이메일 형식이 아닙니다)');
						isValid = false;
					} else {
						hideError(loginId);
					}

					// 비밀번호 검증
					if (!loginPassword || !loginPassword.value.trim()) {
						if (loginPassword) showError(loginPassword, '(비밀번호를 입력해주세요)');
						isValid = false;
					} else if (loginPassword.value.length < 6) {
						showError(loginPassword, '(비밀번호를 6자리 이상 입력해 주세요)');
						isValid = false;
					} else {
						hideError(loginPassword);
					}

					if (isValid) {
						alert('로그인 성공!');
						// 실제 로그인 로직으로 대체
					}
				});
			}
		});
	</script>
</body>

</html>