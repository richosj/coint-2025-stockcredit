<!-- @pageTitle 아이디 찾기 -->
<!-- @pageNote 아이디 찾기 페이지 -->
<!-- @pageCreated 2025-11-25 -->
<!-- @pageUpdated 2025-11-25 -->
<!DOCTYPE html>
<html lang="ko">

<head>
	{{> layout/meta}}
</head>

<body>
	{{> layout/header}}
	<main id="main" class="main">
		{{> layout/subVisual}}

		<div class="breadcrumb">
			<div class="container">
				<ol class="breadcrumb-list">
					<li class="breadcrumb-item">
						<a href="/">스탁크레딧 </a>
					</li>
					<li class="breadcrumb-item">
						<span>아이디찾기 Step1 (본인인증)</span>
					</li>
				</ol>
			</div>
		</div>

		<div id="sub-layout">
			<div class="container">
				<div class="login-container">
					<form id="find_id-form" class="login-form">
						<div id="find_id">
							<div class="find_id-content">
								<p class="info-message">휴대전화번호는 10이상 11자리 이하로 입력해 주세요</p>
								<div class="input-row">
									<label for="confirm-name" class="label sr-only">이름</label>
									<input type="text" id="confirm-name" name="confirm-name" placeholder="이름을 입력하세요.">
								</div>
								<div class="birth">
									<div class="input-row">
										<label for="confirm-birth" class="label sr-only">생년월일</label>
										<input type="text" id="confirm-birth" name="confirm-birth" placeholder="생년월일 6자리를 입력하세요.">
									</div>
									<span class="birth-separator">--</span>
									<div class="input-row select-row">
										<label for="confirm-gender" class="label sr-only"></label>
										<select id="confirm-gender" name="confirm-gender">
											<option value=""></option>
										</select>
									</div>
								</div>
								<div class="input-row">
									<div class="carrier-selector">
										<button type="button" class="carrier-btn" data-carrier="kt">KT</button>
										<button type="button" class="carrier-btn" data-carrier="skt">SKT</button>
										<button type="button" class="carrier-btn" data-carrier="lgu">LGU+</button>
										<button type="button" class="carrier-btn" data-carrier="kt-mvno">
											알뜰폰
											<span class="sub-label">(KT)</span>
										</button>
										<button type="button" class="carrier-btn" data-carrier="skt-mvno">
											알뜰폰
											<span class="sub-label">(SKT)</span>
										</button>
										<button type="button" class="carrier-btn active" data-carrier="lgu-mvno">
											알뜰폰
											<span class="sub-label">(LGU+)</span>
										</button>
									</div>
								</div>
								<div class="input-row">
									<label for="confirm-phone" class="label sr-only">전화번호</label>
									<input type="text" id="confirm-phone" name="confirm-phone" placeholder="전화번호를 입력하세요.">
								</div>
							</div>
							<div class="input-row">
								<button type="submit" class="btn-login">Step2 본인인증</button>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>

	</main>

	{{> layout/footer}}

	<script type="module" src="/js/main.js"></script>
	<script>
		document.addEventListener('DOMContentLoaded', function() {
			const findIdForm = document.getElementById('find_id-form');
			const confirmName = document.getElementById('confirm-name');
			const confirmBirth = document.getElementById('confirm-birth');
			const confirmGender = document.getElementById('confirm-gender');
			const confirmPhone = document.getElementById('confirm-phone');
			const carrierBtns = document.querySelectorAll('.carrier-btn');
			const breadcrumbSpan = document.querySelector('.breadcrumb-item span');

			// 에러 메시지 표시 함수
			function showError(input, message) {
				let errorDiv = input.parentElement.querySelector('.error-message');
				if (!errorDiv) {
					errorDiv = document.createElement('div');
					errorDiv.className = 'error-message';
					input.parentElement.appendChild(errorDiv);
				}
				errorDiv.textContent = message;
				errorDiv.style.display = 'block';
				errorDiv.style.color = '#df0000';
				input.style.borderColor = '#df0000';
			}

			// 에러 메시지 숨기기
			function hideError(input) {
				const errorDiv = input.parentElement.querySelector('.error-message');
				if (errorDiv) {
					errorDiv.style.display = 'none';
				}
				input.style.borderColor = '';
			}

			// 전화번호 유효성 검사
			function validatePhone(phone) {
				const phoneRegex = /^[0-9]{10,11}$/;
				return phoneRegex.test(phone.replace(/[^0-9]/g, ''));
			}

			// 생년월일 유효성 검사 (6자리 숫자)
			function validateBirth(birth) {
				const birthRegex = /^[0-9]{6}$/;
				return birthRegex.test(birth.replace(/[^0-9]/g, ''));
			}

			// 통신사 버튼 클릭 이벤트
			carrierBtns.forEach(btn => {
				btn.addEventListener('click', function() {
					carrierBtns.forEach(b => b.classList.remove('active'));
					this.classList.add('active');
				});
			});

			// 실시간 검증
			if (confirmName) {
				confirmName.addEventListener('blur', function() {
					if (this.value.trim() && this.value.trim().length < 2) {
						showError(this, '이름을 2자 이상 입력해주세요.');
					} else if (this.value.trim()) {
						hideError(this);
					}
				});
			}

			if (confirmBirth) {
				confirmBirth.addEventListener('blur', function() {
					if (this.value.trim() && !validateBirth(this.value)) {
						showError(this, '생년월일을 6자리 숫자로 입력해주세요.');
					} else if (this.value.trim()) {
						hideError(this);
					}
				});
			}

			if (confirmPhone) {
				confirmPhone.addEventListener('blur', function() {
					if (this.value.trim() && !validatePhone(this.value)) {
						showError(this, '올바른 전화번호 형식이 아닙니다. (10-11자리 숫자)');
					} else if (this.value.trim()) {
						hideError(this);
					}
				});
			}

			// 폼 제출 검증
			if (findIdForm) {
				findIdForm.addEventListener('submit', function(e) {
					e.preventDefault();

					let isValid = true;

					// 이름 검증
					if (!confirmName || !confirmName.value.trim()) {
						if (confirmName) showError(confirmName, '이름을 입력해주세요.');
						isValid = false;
					} else if (confirmName.value.trim().length < 2) {
						showError(confirmName, '이름을 2자 이상 입력해주세요.');
						isValid = false;
					} else {
						hideError(confirmName);
					}

					// 생년월일 검증
					if (!confirmBirth || !confirmBirth.value.trim()) {
						if (confirmBirth) showError(confirmBirth, '생년월일을 입력해주세요.');
						isValid = false;
					} else if (!validateBirth(confirmBirth.value)) {
						showError(confirmBirth, '생년월일을 6자리 숫자로 입력해주세요.');
						isValid = false;
					} else {
						hideError(confirmBirth);
					}

					// 성별 검증
					if (!confirmGender || !confirmGender.value) {
						if (confirmGender) {
							showError(confirmGender, '성별을 선택해주세요.');
						}
						isValid = false;
					} else {
						hideError(confirmGender);
					}

					// 통신사 선택 검증
					const activeCarrier = document.querySelector('.carrier-btn.active');
					if (!activeCarrier) {
						alert('통신사를 선택해주세요.');
						isValid = false;
					}

					// 전화번호 검증
					if (!confirmPhone || !confirmPhone.value.trim()) {
						if (confirmPhone) showError(confirmPhone, '전화번호를 입력해주세요.');
						isValid = false;
					} else if (!validatePhone(confirmPhone.value)) {
						showError(confirmPhone, '올바른 전화번호 형식이 아닙니다. (10-11자리 숫자)');
						isValid = false;
					} else {
						hideError(confirmPhone);
					}

					if (isValid) {
						if (breadcrumbSpan) breadcrumbSpan.textContent = '아이디찾기 Step2 (문자인증)';
						alert('본인인증이 완료되었습니다.');
						// 실제 인증 로직으로 대체
					}
				});
			}
		});
	</script>
</body>

</html>